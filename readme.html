<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pandas</title>
  <link rel="stylesheet" type="text/css" media="all" href="github-markdown.css" />
  <style>
	.markdown-body {
		box-sizing: border-box;
		min-width: 200px;
		max-width: 980px;
		margin: 0 auto;
		padding: 45px;
	}
	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
    }
	}
    span {
    color: rgb(16, 192, 39);
    font-weight: bold;  
  }
    .alert{ color: red; }
</style>
</head>
<body>
  <article class="markdown-body">
<h1>Pandas</h1>
<ul>
<li>Pandas proviene de 2 terminos: PANel DAta</li>
<li>Instalación de <span>pandas</span> -&gt; <code>pip install pandas</code></li>
</ul>
<h2>Estructura de datos en Pandas</h2>
<p>De acuerdo a la dimension hay tres tipos de estructura:</p>
<ul>
<li>1 dimensión -&gt;  <span> Series Object </span></li>
<li>2 dimensiones -&gt; <span> DataFrame </span></li>
<li>3 dimensiones o más -&gt; <span> Panel Data </span></li>
</ul>
<h3><ins>Series object</ins></h3>
<ul>
<li>En python es un array unidimensional</li>
<li>Contiene datos similares o de de diverso tipo</li>
<li>Pueden utilizarse 3 tipos de estructuras
<ul>
<li>Arreglos</li>
<li>Diccinarios</li>
<li>Escalar</li>
</ul>
</li>
</ul>
<h3><ins>DataFrame</ins></h3>
<p>Posee columnas de datos</p>
<h4>Caracteristicas</h4>
<ol>
<li>Su tamaño puede cambiar</li>
<li>Diferentes tipos de columnas</li>
<li>Ejes etiquetados</li>
<li>Operaciones aritméticas en columnas y filas</li>
</ol>
<pre><code class="language-python">  fruits  count
0   apple     10
1  banana     20
2   mango     15
</code></pre>
  <hr>
<h2>Merge, Join y Concatenate</h2>
<p><a href="merge.py">merge.py</a></p>
<p><code>df3 = df1.merge(df2, on='Title', how='inner')</code></p>
<p>Se obtiene los datos en común de ambos tomando como refencia a <span>title</span> DataFrames<br>
<br>
<ins>Inner merge</ins></p>
<pre><code class="language-python">    Player_x  Points Title  Player_y  Power
0   player1   8      Game1  player1   punch
</code></pre>
<ul>
<li>Player_x -&gt; atributo de df1</li>
<li>Player_y -&gt; atributo de df2</li>
</ul>
<p><ins>Left merge</ins>
<br><br>
Con el valor how = <span>left</span> Se obtienen todos los valores del DataFrame izq teniendo como referencia el atributo Player del primer DataFrame (df1) y los valores en comun que posee el segundo(df2).</p>
<p>En caso de no haber coincidencias se agrega NaN</p>
<p><code>df5 = df1.merge(df2, on='Player', how='left')</code></p>
<pre><code class="language-python">0  player1       8   Game1  punch   Game1
1  player2       9   Game2    NaN     NaN
2  player3       6   Game3    NaN     NaN
</code></pre>
<p><ins>Right merge</ins><br>
<br>
Con el valor <code>how = <span>right</span></code> Se obtienen todos los valores del DataFrame der<br>
teniendo como referencia el atributo Player del segundo DataFrame (df2)<br>
y los valores en comun que posee el primero(df1).</p>
<p><code>df5 = df1.merge(df2, on='Player', how='right')</code></p>
  <pre>
      Player   Points   Title_x   Power   Title_y
  <hr class="code-line">
  0  player1     8.0     Game1    punch   Game1
  1  player5     NaN     NaN      kick    Game5
  2  player6     NaN     NaN      elbow   Game6
  </pre>  
<p><ins>Outer merge</ins><br>
<br>
Con el valor <code>how = <span>outer</span></code> se obtienen todos los valores de los<br>
DateFrames incluyendo aquellos atributos que no poseen.</p>
  <pre>
      Player  Points Title_x  Power Title_y <hr>
  0  player1     8.0   Game1  punch   Game1
  1  player2     9.0   Game2    NaN     NaN
  2  player3     6.0   Game3    NaN     NaN
  3  player5     NaN     NaN   kick   Game5
  4  player6     NaN     NaN  elbow   Game6
  </pre>
  <br>
<h3>Join</h3>
  <br>
  Mientras que Merge requiere de atributos en comun, Join une dos DataFrames a partir de su índice.
  <br>
  <br>    
  <ins>Inner Join</ins>
  <br>  
  <br>
  <code>df3 = df1.join(df2, how='inner')</code>
  <pre>
      Player  Points  Title  Players  Power Titles <hr>
  L2  player1       8  Game1  player5   kick  Game5
  L3  player2       9  Game2  player6  elbow  Game6
  </pre>
<p><ins>Left Join</ins></p>
<p>incorpora siempre los indices del primero, y luego aquellos indice que no posee el segundo les incorpora un valor NaN</p>
  <pre>
      Player  Points  Title  Players  Power Titles <hr>
  L2  player1       8  Game1  player5   kick  Game5
  L3  player2       9  Game2  player6  elbow  Game6
  L4  player3       6  Game3      NaN    NaN    NaN
  </pre>
<p><ins>Right Join</ins></p>
<p>Lo mismo pero incorporando esta vez los valores del DataFrame der.</p>
  <pre>
      Player  Points  Title  Players  Power Titles <hr>
  L1      NaN     NaN    NaN  player1  punch  Game1
  L2  player1     8.0  Game1  player5   kick  Game5
  L3  player2     9.0  Game2  player6  elbow  Game6
  </pre>
<p><ins>Outter Join</ins></p>
<p>Se obtienen todos los indices en total de los dos DataFrames</p>
  <pre>
      Player  Points  Title  Players  Power Titles <hr>
  L1      NaN     NaN    NaN  player1  punch  Game1
  L2  player1     8.0  Game1  player5   kick  Game5
  L3  player2     9.0  Game2  player6  elbow  Game6
  L4  player3     6.0  Game3      NaN    NaN    NaN
  </pre>
  <br>
<h3>Concatenate</h3>
  <br>
  <code>df3 = pd.concat([df1, df2])</code>    
  <br><br>  
  Se concatena un df con otro
  <pre>
      Player  Points  Title  Players  Power Titles <hr> 
  L2  player1     8.0  Game1      NaN    NaN    NaN
  L3  player2     9.0  Game2      NaN    NaN    NaN
  L4  player3     6.0  Game3      NaN    NaN    NaN
  L1      NaN     NaN    NaN  player1  punch  Game1
  L2      NaN     NaN    NaN  player5   kick  Game5
  L3      NaN     NaN    NaN  player6  elbow  Game6
  </pre>
<p><br><br></p>
  <hr>
  <br>  
<h2>Importando y analizando el conjunto de datos</h2>
<ul>
<li><code>pd.read_csv('file.csv')</code> -&gt; Lee los datos a traves de un dataframe</li>
<li><code>variable.head(num)</code> -&gt; Lee los primeros 5 registros por defecto o acepta una cantidad a visualizar</li>
<li><code>print(cars.tail(num))</code> -&gt; Lee los ultimos 5 registros o x cantidad</li>
<li>Estos metodos devuelven un valor <span>unnamed=0</span> -&gt; registros que no poseen valor</li>
<li><code>file.shape</code> -&gt; Se obtiene una tupla con dos items: el numeros de filas y de columnas.</li>
<li><span>* </span><code>file.info(null_counts=True)</code><br>
info resumiendo cada columna del df, contandos el numero de registros nulos<br>
y el tipo de dato registrado</li>
</ul>
<pre>
class pandas.core.frame.DataFrame'
RangeIndex: 32 entries, 0 to 31
Data columns (total 12 columns):
 #   Column      Non-Null Count  Dtype
---  ------      --------------  -----
 0   Unnamed: 0  32 non-null     object
 1   mpg         32 non-null     float64
 2   cyl         32 non-null     int64
 3   disp        32 non-null     float64
 4   hp          32 non-null     int64
 5   drat        32 non-null     float64
 6   wt          32 non-null     float64
 7   qsec        32 non-null     float64
 8   vs          32 non-null     int64
 9   am          32 non-null     int64
 10  gear        32 non-null     int64
 11  carb        32 non-null     int64
dtypes: float64(5), int64(6), object(1)   
 <span>***Cantidad de datos por tipo *** </span>
memory usage: 2.9+ KB
</pre>  
<br>  
<ul>
<li><code>cars.mean()</code> -&gt; Muestra el promedio de cada atributo</li>
<li><code>cars.median()</code> -&gt; Muestra la mediana de cada atributo</li>
<li><code>cars.std()</code> -&gt; Desviación estandar de cada atributo</li>
<li><code>cars.max()</code> -&gt; El valor máximo de cada atributo</li>
<li><code>cars.min()</code> -&gt; El valor mínimo de cada atributo</li>
<li><code>cars.count()</code> -&gt; numero de registros no nulos de cada columna</li>
<li><code>cars.describe()</code> -&gt; resumen descriptivo con todos datos estadísticos previos</li>
</ul>
<pre>
             mpg        cyl        disp          hp       drat         wt       qsec         vs         am       gear     carb
count  32.000000  32.000000   32.000000   32.000000  32.000000  32.000000  32.000000  32.000000  32.000000  32.000000  32.0000
mean   20.090625   6.187500  230.721875  146.687500   3.596563   3.217250  17.848750   0.437500   0.406250   3.687500   2.8125
std     6.026948   1.785922  123.938694   68.562868   0.534679   0.978457   1.786943   0.504016   0.498991   0.737804   1.6152
min    10.400000   4.000000   71.100000   52.000000   2.760000   1.513000  14.500000   0.000000   0.000000   3.000000   1.0000
25%    15.425000   4.000000  120.825000   96.500000   3.080000   2.581250  16.892500   0.000000   0.000000   3.000000   2.0000
50%    19.200000   6.000000  196.300000  123.000000   3.695000   3.325000  17.710000   0.000000   0.000000   4.000000   2.0000
75%    22.800000   8.000000  326.000000  180.000000   3.920000   3.610000  18.900000   1.000000   1.000000   4.000000   4.0000
max    33.900000   8.000000  472.000000  335.000000   4.930000   5.424000  22.900000   1.000000   1.000000   5.000000   8.0000  
</pre>
<br>    
<hr> 
<br>
<h2>Data Cleaning</h2>
<p>Data Cleaning o data cleansing es el proceso de detección,<br>
correción o eliminación de registros corruptos o incorrectos de una estructura de datos,<br>
tabla o base de datos.</p>
<ul>
<li>Se reemplaza, modifica o borra datos incompletos o irrelevantes</li>
</ul>
<p><ins>Métodos y atributos</ins></p>
<ul>
<li>
<p><code>file.rename(columns={'Unnamed: 0':'model'})</code> -&gt; Renombra el atributo &quot;Unnamed: 0&quot; a &quot;model</p>
</li>
<li>
<p><code>file.attribute.fillna(file.attribute.mean())</code> -&gt; Rellena los valores null del atributo con su promedio</p>
</li>
<li>
<p><code>file.drop(columns=['attribute_name'])</code> -&gt; Quita un atributo <span class="alert">(Quita, no elimina)</span></p>
</li>
<li>
<p><code>df = cars[['mpg', 'cyl', 'disp', 'hp', 'drat', 'wt',  'qsec', 'vs', 'am', 'gear', 'carb']].corr()</code><br>
Se obtiene una <span>Correlación matricial</span><br>
Una <span class="highlight">matriz correlacional</span> muestra en pantalla el grado de correlacion que tiene una variable con otra.</p>
</li>
<li>
<p>En un rango de a 1 y -1. Cuanto mas cercano al 1 mas correlatividad existe.</p>
</li>
<li>
<p>Los valores con correlatividad 1.0 son ellos mismos(por lo general).</p>
</li>
<li>
<p>Si un atributo cambia, y su correlatividad es alta es mayor la probabilidad de que el otro tambien cambie</p>
</li>
</ul>
<pre>
        mpg       cyl      disp        hp      drat        wt      qsec        vs        am      gear      carb
mpg   1.000000 -0.852162 -0.847551 -0.776168  0.681172 -0.867659  0.385292  0.664039  0.599832  0.480285 -0.550925
cyl  -0.852162  1.000000  0.902033  0.832447 -0.699938  0.782496 -0.555819 -0.810812 -0.522607 -0.492687  0.526988
disp -0.847551  0.902033  1.000000  0.790949 -0.710214  0.887980 -0.399914 -0.710416 -0.591227 -0.555569  0.394977
hp   -0.776168  0.832447  0.790949  1.000000 -0.448759  0.658748 -0.664519 -0.723097 -0.243204 -0.125704  0.749812
drat  0.681172 -0.699938 -0.710214 -0.448759  1.000000 -0.712441  0.055749  0.440278  0.712711  0.699610 -0.090790
wt   -0.867659  0.782496  0.887980  0.658748 -0.712441  1.000000 -0.156305 -0.554916 -0.692495 -0.583287  0.427606
qsec  0.385292 -0.555819 -0.399914 -0.664519  0.055749 -0.156305  1.000000  0.719779 -0.274613 -0.262733 -0.641945
vs    0.664039 -0.810812 -0.710416 -0.723097  0.440278 -0.554916  0.719779  1.000000  0.168345  0.206023 -0.569607
am    0.599832 -0.522607 -0.591227 -0.243204  0.712711 -0.692495 -0.274613  0.168345  1.000000  0.794059  0.057534
gear  0.480285 -0.492687 -0.555569 -0.125704  0.699610 -0.583287 -0.262733  0.206023  0.794059  1.000000  0.274073
carb -0.550925  0.526988  0.394977  0.749812 -0.090790  0.427606 -0.641945 -0.569607  0.057534  0.274073  1.000000
</pre>
</article>
</body>
</html>
